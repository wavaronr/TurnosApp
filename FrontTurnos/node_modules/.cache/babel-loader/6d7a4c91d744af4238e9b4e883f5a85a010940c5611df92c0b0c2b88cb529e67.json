{"ast":null,"code":"var _jsxFileName = \"/home/user/calendario/src/components/DayCard.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport '../css/WeekDetail.css';\nimport AssignPersonModal from './AssignPersonModal.js';\nimport { useCalendar } from '../context/CalendarContext.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ShiftSection = ({\n  title,\n  people,\n  onAdd,\n  onRemove,\n  userProfile\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"shift-section\",\n  children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n    className: \"shift-title\",\n    children: title\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"people-list\",\n    children: people.map(person => /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"person-pill\",\n      children: [person.name, userProfile === 'ADM' && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => onRemove(person.id),\n        className: \"remove-person-btn\",\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 13,\n        columnNumber: 37\n      }, this)]\n    }, person.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 5\n  }, this), userProfile === 'ADM' && /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: onAdd,\n    className: \"add-person-btn\",\n    children: \"+\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 31\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 7,\n  columnNumber: 3\n}, this);\n_c = ShiftSection;\nfunction DayCard({\n  day,\n  people\n}) {\n  _s();\n  const {\n    colombianHolidays,\n    shifts,\n    assignShift,\n    removeShift,\n    getValidPeopleForShift\n  } = useCalendar();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedShift, setSelectedShift] = useState(null);\n  const [validPeople, setValidPeople] = useState([]);\n  const userProfile = localStorage.getItem('profile'); // Get user profile\n\n  const dayString = day.toISOString().split('T')[0];\n  const dayShifts = shifts[dayString] || {\n    morning: [],\n    afternoon: [],\n    night: [],\n    off: []\n  };\n  const dayOfMonth = day.getDate();\n  const month = day.getMonth() + 1;\n  const isHoliday = colombianHolidays.some(h => h.dia === dayOfMonth && h.mes === month);\n  const dayName = day.toLocaleDateString('es-ES', {\n    weekday: 'short'\n  });\n  const cardStyle = {\n    ...(isHoliday && {\n      backgroundColor: '#fdd'\n    }),\n    listStyle: 'none'\n  };\n  const dayNumberStyle = {\n    ...(isHoliday && {\n      color: 'red',\n      fontWeight: 'bold'\n    })\n  };\n  const handleAddPerson = shiftType => {\n    const validPeopleForShift = getValidPeopleForShift(day, shiftType, people);\n    setValidPeople(validPeopleForShift);\n    setSelectedShift(shiftType);\n    setIsModalOpen(true);\n  };\n  const handleSelectPerson = person => {\n    assignShift(day, selectedShift, person);\n    setIsModalOpen(false);\n  };\n  const handleRemovePerson = (shiftType, personId) => {\n    removeShift(day, shiftType, personId);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"day-card\",\n    style: cardStyle,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"day-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"day-name\",\n        children: dayName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"day-number\",\n        style: dayNumberStyle,\n        children: dayOfMonth\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shifts-container\",\n      children: [/*#__PURE__*/_jsxDEV(ShiftSection, {\n        title: \"Ma\\xF1ana\",\n        people: dayShifts.morning,\n        onAdd: () => handleAddPerson('morning'),\n        onRemove: personId => handleRemovePerson('morning', personId),\n        userProfile: userProfile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ShiftSection, {\n        title: \"Tarde\",\n        people: dayShifts.afternoon,\n        onAdd: () => handleAddPerson('afternoon'),\n        onRemove: personId => handleRemovePerson('afternoon', personId),\n        userProfile: userProfile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ShiftSection, {\n        title: \"Noche\",\n        people: dayShifts.night,\n        onAdd: () => handleAddPerson('night'),\n        onRemove: personId => handleRemovePerson('night', personId),\n        userProfile: userProfile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ShiftSection, {\n        title: \"Libre\",\n        people: dayShifts.off,\n        onAdd: () => handleAddPerson('off'),\n        onRemove: personId => handleRemovePerson('off', personId),\n        userProfile: userProfile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), isModalOpen && /*#__PURE__*/_jsxDEV(AssignPersonModal, {\n      people: validPeople,\n      onSelect: handleSelectPerson,\n      onClose: () => setIsModalOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(DayCard, \"sEBEb30/wW960TW3+zGo152Lpks=\", false, function () {\n  return [useCalendar];\n});\n_c2 = DayCard;\nexport default DayCard;\nvar _c, _c2;\n$RefreshReg$(_c, \"ShiftSection\");\n$RefreshReg$(_c2, \"DayCard\");","map":{"version":3,"names":["React","useState","AssignPersonModal","useCalendar","jsxDEV","_jsxDEV","ShiftSection","title","people","onAdd","onRemove","userProfile","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","person","name","onClick","id","_c","DayCard","day","_s","colombianHolidays","shifts","assignShift","removeShift","getValidPeopleForShift","isModalOpen","setIsModalOpen","selectedShift","setSelectedShift","validPeople","setValidPeople","localStorage","getItem","dayString","toISOString","split","dayShifts","morning","afternoon","night","off","dayOfMonth","getDate","month","getMonth","isHoliday","some","h","dia","mes","dayName","toLocaleDateString","weekday","cardStyle","backgroundColor","listStyle","dayNumberStyle","color","fontWeight","handleAddPerson","shiftType","validPeopleForShift","handleSelectPerson","handleRemovePerson","personId","style","onSelect","onClose","_c2","$RefreshReg$"],"sources":["/home/user/calendario/src/components/DayCard.js"],"sourcesContent":["import React, { useState } from 'react';\nimport '../css/WeekDetail.css';\nimport AssignPersonModal from './AssignPersonModal.js';\nimport { useCalendar } from '../context/CalendarContext.js';\n\nconst ShiftSection = ({ title, people, onAdd, onRemove, userProfile }) => (\n  <div className=\"shift-section\">\n    <h6 className=\"shift-title\">{title}</h6>\n    <div className=\"people-list\">\n      {people.map(person => (\n        <span key={person.id} className=\"person-pill\">\n          {person.name}\n          {userProfile === 'ADM' && <button onClick={() => onRemove(person.id)} className=\"remove-person-btn\">X</button>}\n        </span>\n      ))}\n    </div>\n    {userProfile === 'ADM' && <button onClick={onAdd} className=\"add-person-btn\">+</button>}\n  </div>\n);\n\nfunction DayCard({ day, people }) {\n  const { \n    colombianHolidays, \n    shifts, \n    assignShift, \n    removeShift, \n    getValidPeopleForShift \n  } = useCalendar();\n\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedShift, setSelectedShift] = useState(null);\n  const [validPeople, setValidPeople] = useState([]);\n  const userProfile = localStorage.getItem('profile'); // Get user profile\n\n  const dayString = day.toISOString().split('T')[0];\n\n  const dayShifts = shifts[dayString] || { morning: [], afternoon: [], night: [], off: [] };\n\n  const dayOfMonth = day.getDate();\n  const month = day.getMonth() + 1;\n  const isHoliday = colombianHolidays.some(h => h.dia === dayOfMonth && h.mes === month);\n  const dayName = day.toLocaleDateString('es-ES', { weekday: 'short' });\n\n  const cardStyle = { ...(isHoliday && { backgroundColor: '#fdd' }), listStyle: 'none' };\n  const dayNumberStyle = { ...(isHoliday && { color: 'red', fontWeight: 'bold' }) };\n\n  const handleAddPerson = (shiftType) => {\n    const validPeopleForShift = getValidPeopleForShift(day, shiftType, people);\n    setValidPeople(validPeopleForShift);\n    setSelectedShift(shiftType);\n    setIsModalOpen(true);\n  };\n\n  const handleSelectPerson = (person) => {\n    assignShift(day, selectedShift, person);\n    setIsModalOpen(false);\n  };\n\n  const handleRemovePerson = (shiftType, personId) => {\n    removeShift(day, shiftType, personId);\n  };\n\n  return (\n    <div className=\"day-card\" style={cardStyle}>\n      <div className=\"day-header\">\n        <div className=\"day-name\">{dayName}</div>\n        <div className=\"day-number\" style={dayNumberStyle}>{dayOfMonth}</div>\n      </div>\n      <div className=\"shifts-container\">\n        <ShiftSection\n          title=\"Mañana\"\n          people={dayShifts.morning}\n          onAdd={() => handleAddPerson('morning')}\n          onRemove={(personId) => handleRemovePerson('morning', personId)}\n          userProfile={userProfile}\n        />\n        <ShiftSection\n          title=\"Tarde\"\n          people={dayShifts.afternoon}\n          onAdd={() => handleAddPerson('afternoon')}\n          onRemove={(personId) => handleRemovePerson('afternoon', personId)}\n          userProfile={userProfile}\n        />\n        <ShiftSection\n          title=\"Noche\"\n          people={dayShifts.night}\n          onAdd={() => handleAddPerson('night')}\n          onRemove={(personId) => handleRemovePerson('night', personId)}\n          userProfile={userProfile}\n        />\n        <ShiftSection\n          title=\"Libre\"\n          people={dayShifts.off}\n          onAdd={() => handleAddPerson('off')}\n          onRemove={(personId) => handleRemovePerson('off', personId)}\n          userProfile={userProfile}\n        />\n      </div>\n\n      {isModalOpen && (\n        <AssignPersonModal\n          people={validPeople}\n          onSelect={handleSelectPerson}\n          onClose={() => setIsModalOpen(false)}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default DayCard;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAO,uBAAuB;AAC9B,OAAOC,iBAAiB,MAAM,wBAAwB;AACtD,SAASC,WAAW,QAAQ,+BAA+B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5D,MAAMC,YAAY,GAAGA,CAAC;EAAEC,KAAK;EAAEC,MAAM;EAAEC,KAAK;EAAEC,QAAQ;EAAEC;AAAY,CAAC,kBACnEN,OAAA;EAAKO,SAAS,EAAC,eAAe;EAAAC,QAAA,gBAC5BR,OAAA;IAAIO,SAAS,EAAC,aAAa;IAAAC,QAAA,EAAEN;EAAK;IAAAO,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC,eACxCZ,OAAA;IAAKO,SAAS,EAAC,aAAa;IAAAC,QAAA,EACzBL,MAAM,CAACU,GAAG,CAACC,MAAM,iBAChBd,OAAA;MAAsBO,SAAS,EAAC,aAAa;MAAAC,QAAA,GAC1CM,MAAM,CAACC,IAAI,EACXT,WAAW,KAAK,KAAK,iBAAIN,OAAA;QAAQgB,OAAO,EAAEA,CAAA,KAAMX,QAAQ,CAACS,MAAM,CAACG,EAAE,CAAE;QAACV,SAAS,EAAC,mBAAmB;QAAAC,QAAA,EAAC;MAAC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA,GAFrGE,MAAM,CAACG,EAAE;MAAAR,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAGd,CACP;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC,EACLN,WAAW,KAAK,KAAK,iBAAIN,OAAA;IAAQgB,OAAO,EAAEZ,KAAM;IAACG,SAAS,EAAC,gBAAgB;IAAAC,QAAA,EAAC;EAAC;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAQ,CAAC;AAAA;EAAAH,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OACpF,CACN;AAACM,EAAA,GAbIjB,YAAY;AAelB,SAASkB,OAAOA,CAAC;EAAEC,GAAG;EAAEjB;AAAO,CAAC,EAAE;EAAAkB,EAAA;EAChC,MAAM;IACJC,iBAAiB;IACjBC,MAAM;IACNC,WAAW;IACXC,WAAW;IACXC;EACF,CAAC,GAAG5B,WAAW,CAAC,CAAC;EAEjB,MAAM,CAAC6B,WAAW,EAAEC,cAAc,CAAC,GAAGhC,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACiC,aAAa,EAAEC,gBAAgB,CAAC,GAAGlC,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACmC,WAAW,EAAEC,cAAc,CAAC,GAAGpC,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAMU,WAAW,GAAG2B,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;;EAErD,MAAMC,SAAS,GAAGf,GAAG,CAACgB,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAEjD,MAAMC,SAAS,GAAGf,MAAM,CAACY,SAAS,CAAC,IAAI;IAAEI,OAAO,EAAE,EAAE;IAAEC,SAAS,EAAE,EAAE;IAAEC,KAAK,EAAE,EAAE;IAAEC,GAAG,EAAE;EAAG,CAAC;EAEzF,MAAMC,UAAU,GAAGvB,GAAG,CAACwB,OAAO,CAAC,CAAC;EAChC,MAAMC,KAAK,GAAGzB,GAAG,CAAC0B,QAAQ,CAAC,CAAC,GAAG,CAAC;EAChC,MAAMC,SAAS,GAAGzB,iBAAiB,CAAC0B,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAKP,UAAU,IAAIM,CAAC,CAACE,GAAG,KAAKN,KAAK,CAAC;EACtF,MAAMO,OAAO,GAAGhC,GAAG,CAACiC,kBAAkB,CAAC,OAAO,EAAE;IAAEC,OAAO,EAAE;EAAQ,CAAC,CAAC;EAErE,MAAMC,SAAS,GAAG;IAAE,IAAIR,SAAS,IAAI;MAAES,eAAe,EAAE;IAAO,CAAC,CAAC;IAAEC,SAAS,EAAE;EAAO,CAAC;EACtF,MAAMC,cAAc,GAAG;IAAE,IAAIX,SAAS,IAAI;MAAEY,KAAK,EAAE,KAAK;MAAEC,UAAU,EAAE;IAAO,CAAC;EAAE,CAAC;EAEjF,MAAMC,eAAe,GAAIC,SAAS,IAAK;IACrC,MAAMC,mBAAmB,GAAGrC,sBAAsB,CAACN,GAAG,EAAE0C,SAAS,EAAE3D,MAAM,CAAC;IAC1E6B,cAAc,CAAC+B,mBAAmB,CAAC;IACnCjC,gBAAgB,CAACgC,SAAS,CAAC;IAC3BlC,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;EAED,MAAMoC,kBAAkB,GAAIlD,MAAM,IAAK;IACrCU,WAAW,CAACJ,GAAG,EAAES,aAAa,EAAEf,MAAM,CAAC;IACvCc,cAAc,CAAC,KAAK,CAAC;EACvB,CAAC;EAED,MAAMqC,kBAAkB,GAAGA,CAACH,SAAS,EAAEI,QAAQ,KAAK;IAClDzC,WAAW,CAACL,GAAG,EAAE0C,SAAS,EAAEI,QAAQ,CAAC;EACvC,CAAC;EAED,oBACElE,OAAA;IAAKO,SAAS,EAAC,UAAU;IAAC4D,KAAK,EAAEZ,SAAU;IAAA/C,QAAA,gBACzCR,OAAA;MAAKO,SAAS,EAAC,YAAY;MAAAC,QAAA,gBACzBR,OAAA;QAAKO,SAAS,EAAC,UAAU;QAAAC,QAAA,EAAE4C;MAAO;QAAA3C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACzCZ,OAAA;QAAKO,SAAS,EAAC,YAAY;QAAC4D,KAAK,EAAET,cAAe;QAAAlD,QAAA,EAAEmC;MAAU;QAAAlC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClE,CAAC,eACNZ,OAAA;MAAKO,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAC/BR,OAAA,CAACC,YAAY;QACXC,KAAK,EAAC,WAAQ;QACdC,MAAM,EAAEmC,SAAS,CAACC,OAAQ;QAC1BnC,KAAK,EAAEA,CAAA,KAAMyD,eAAe,CAAC,SAAS,CAAE;QACxCxD,QAAQ,EAAG6D,QAAQ,IAAKD,kBAAkB,CAAC,SAAS,EAAEC,QAAQ,CAAE;QAChE5D,WAAW,EAAEA;MAAY;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1B,CAAC,eACFZ,OAAA,CAACC,YAAY;QACXC,KAAK,EAAC,OAAO;QACbC,MAAM,EAAEmC,SAAS,CAACE,SAAU;QAC5BpC,KAAK,EAAEA,CAAA,KAAMyD,eAAe,CAAC,WAAW,CAAE;QAC1CxD,QAAQ,EAAG6D,QAAQ,IAAKD,kBAAkB,CAAC,WAAW,EAAEC,QAAQ,CAAE;QAClE5D,WAAW,EAAEA;MAAY;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1B,CAAC,eACFZ,OAAA,CAACC,YAAY;QACXC,KAAK,EAAC,OAAO;QACbC,MAAM,EAAEmC,SAAS,CAACG,KAAM;QACxBrC,KAAK,EAAEA,CAAA,KAAMyD,eAAe,CAAC,OAAO,CAAE;QACtCxD,QAAQ,EAAG6D,QAAQ,IAAKD,kBAAkB,CAAC,OAAO,EAAEC,QAAQ,CAAE;QAC9D5D,WAAW,EAAEA;MAAY;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1B,CAAC,eACFZ,OAAA,CAACC,YAAY;QACXC,KAAK,EAAC,OAAO;QACbC,MAAM,EAAEmC,SAAS,CAACI,GAAI;QACtBtC,KAAK,EAAEA,CAAA,KAAMyD,eAAe,CAAC,KAAK,CAAE;QACpCxD,QAAQ,EAAG6D,QAAQ,IAAKD,kBAAkB,CAAC,KAAK,EAAEC,QAAQ,CAAE;QAC5D5D,WAAW,EAAEA;MAAY;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1B,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,EAELe,WAAW,iBACV3B,OAAA,CAACH,iBAAiB;MAChBM,MAAM,EAAE4B,WAAY;MACpBqC,QAAQ,EAAEJ,kBAAmB;MAC7BK,OAAO,EAAEA,CAAA,KAAMzC,cAAc,CAAC,KAAK;IAAE;MAAAnB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtC,CACF;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAACS,EAAA,CAxFQF,OAAO;EAAA,QAOVrB,WAAW;AAAA;AAAAwE,GAAA,GAPRnD,OAAO;AA0FhB,eAAeA,OAAO;AAAC,IAAAD,EAAA,EAAAoD,GAAA;AAAAC,YAAA,CAAArD,EAAA;AAAAqD,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}